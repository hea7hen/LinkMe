/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/fetch-nearby/route";
exports.ids = ["app/api/fetch-nearby/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ffetch-nearby%2Froute&page=%2Fapi%2Ffetch-nearby%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffetch-nearby%2Froute.ts&appDir=%2FUsers%2Fabhishek%2FProjects%2FLinkMe-1%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fabhishek%2FProjects%2FLinkMe-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ffetch-nearby%2Froute&page=%2Fapi%2Ffetch-nearby%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffetch-nearby%2Froute.ts&appDir=%2FUsers%2Fabhishek%2FProjects%2FLinkMe-1%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fabhishek%2FProjects%2FLinkMe-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_abhishek_Projects_LinkMe_1_app_api_fetch_nearby_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/fetch-nearby/route.ts */ \"(rsc)/./app/api/fetch-nearby/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/fetch-nearby/route\",\n        pathname: \"/api/fetch-nearby\",\n        filename: \"route\",\n        bundlePath: \"app/api/fetch-nearby/route\"\n    },\n    resolvedPagePath: \"/Users/abhishek/Projects/LinkMe-1/app/api/fetch-nearby/route.ts\",\n    nextConfigOutput,\n    userland: _Users_abhishek_Projects_LinkMe_1_app_api_fetch_nearby_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZmZXRjaC1uZWFyYnklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmZldGNoLW5lYXJieSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmZldGNoLW5lYXJieSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFiaGlzaGVrJTJGUHJvamVjdHMlMkZMaW5rTWUtMSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhYmhpc2hlayUyRlByb2plY3RzJTJGTGlua01lLTEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2U7QUFDNUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlua21lLz81YWY2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYWJoaXNoZWsvUHJvamVjdHMvTGlua01lLTEvYXBwL2FwaS9mZXRjaC1uZWFyYnkvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2ZldGNoLW5lYXJieS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ZldGNoLW5lYXJieVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZmV0Y2gtbmVhcmJ5L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2FiaGlzaGVrL1Byb2plY3RzL0xpbmtNZS0xL2FwcC9hcGkvZmV0Y2gtbmVhcmJ5L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ffetch-nearby%2Froute&page=%2Fapi%2Ffetch-nearby%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffetch-nearby%2Froute.ts&appDir=%2FUsers%2Fabhishek%2FProjects%2FLinkMe-1%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fabhishek%2FProjects%2FLinkMe-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/fetch-nearby/route.ts":
/*!***************************************!*\
  !*** ./app/api/fetch-nearby/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n\nasync function GET(request) {\n    const { searchParams } = new URL(request.url);\n    const lat = parseFloat(searchParams.get('lat'));\n    const lng = parseFloat(searchParams.get('lng'));\n    const radius = parseFloat(searchParams.get('radius')) || 1000;\n    const userId = searchParams.get('userId'); // Exclude current user from results\n    if (!lat || !lng) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Latitude and longitude are required'\n        }, {\n            status: 400\n        });\n    }\n    const supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(\"https://rhgbghiznkqrvdbqufmq.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY);\n    // Calculate bounding box to reduce query size\n    // Approximate: 1 degree latitude ≈ 111km, 1 degree longitude ≈ 111km * cos(latitude)\n    const latOffset = radius / 111000; // Convert meters to degrees\n    const lngOffset = radius / (111000 * Math.cos(lat * Math.PI / 180));\n    // Try PostGIS first (if available), otherwise use bounding box + Haversine\n    let locations;\n    try {\n        // Check if PostGIS is available by trying a PostGIS query\n        // If PostGIS extension is enabled, use ST_DWithin for efficient distance filtering\n        const { data: postgisData, error: postgisError } = await supabase.rpc('get_nearby_locations', {\n            center_lat: lat,\n            center_lng: lng,\n            radius_meters: radius\n        });\n        if (!postgisError && postgisData) {\n            locations = postgisData;\n        } else {\n            // Fallback to bounding box + Haversine\n            const { data: bboxData, error: bboxError } = await supabase.from('locations').select(`\n          user_id, \n          latitude, \n          longitude, \n          updated_at,\n          users!inner(id, name, email, avatar_url, last_active),\n          profiles!inner(id, user_id, profile_type, name, headline, bio, visibility, experience, education, skills, hobbies, prompts, linkedin_url, github_url, instagram_handle, open_to_work, relationship_goal)\n        `).gte('latitude', lat - latOffset).lte('latitude', lat + latOffset).gte('longitude', lng - lngOffset).lte('longitude', lng + lngOffset).neq('user_id', userId || ''); // Exclude current user\n            if (bboxError) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: bboxError.message\n                }, {\n                    status: 500\n                });\n            }\n            // Filter by visibility and calculate exact distance using Haversine\n            const nearby = (bboxData || []).filter((loc)=>{\n                // Only include profiles with 'public' or 'nearby' visibility\n                if (loc.profiles && loc.profiles.length > 0) {\n                    const profile = loc.profiles[0];\n                    if (profile.visibility === 'private') return false;\n                }\n                // Calculate exact distance\n                const distance = getDistanceFromLatLonInMeters(lat, lng, loc.latitude, loc.longitude);\n                return distance <= radius;\n            }).map((loc)=>{\n                const distance = getDistanceFromLatLonInMeters(lat, lng, loc.latitude, loc.longitude);\n                const profile = loc.profiles && loc.profiles.length > 0 ? loc.profiles[0] : null;\n                const user = loc.users || null;\n                if (!user || !profile) return null;\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    avatar_url: user.avatar_url,\n                    last_active: user.last_active,\n                    profile: profile,\n                    location: {\n                        id: loc.id || `${loc.user_id}_loc`,\n                        user_id: loc.user_id,\n                        latitude: loc.latitude,\n                        longitude: loc.longitude,\n                        updated_at: loc.updated_at\n                    },\n                    distance: Math.round(distance)\n                };\n            }).filter((item)=>item !== null);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                data: nearby\n            });\n        }\n    } catch (error) {\n        // If PostGIS RPC doesn't exist, fall back to bounding box method\n        const { data: bboxData, error: bboxError } = await supabase.from('locations').select(`\n        user_id, \n        latitude, \n        longitude, \n        updated_at,\n        users!inner(id, name, email, avatar_url, last_active),\n        profiles!inner(id, user_id, profile_type, name, headline, bio, visibility, experience, education, skills, hobbies, prompts, linkedin_url, github_url, instagram_handle, open_to_work, relationship_goal)\n      `).gte('latitude', lat - latOffset).lte('latitude', lat + latOffset).gte('longitude', lng - lngOffset).lte('longitude', lng + lngOffset).neq('user_id', userId || '');\n        if (bboxError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: bboxError.message\n            }, {\n                status: 500\n            });\n        }\n        // Filter by visibility and calculate exact distance using Haversine\n        const nearby = (bboxData || []).filter((loc)=>{\n            if (loc.profiles && loc.profiles.length > 0) {\n                const profile = loc.profiles[0];\n                if (profile.visibility === 'private') return false;\n            }\n            const distance = getDistanceFromLatLonInMeters(lat, lng, loc.latitude, loc.longitude);\n            return distance <= radius;\n        }).map((loc)=>{\n            const distance = getDistanceFromLatLonInMeters(lat, lng, loc.latitude, loc.longitude);\n            const profile = loc.profiles && loc.profiles.length > 0 ? loc.profiles[0] : null;\n            const user = loc.users || null;\n            if (!user || !profile) return null;\n            return {\n                id: user.id,\n                email: user.email,\n                name: user.name,\n                avatar_url: user.avatar_url,\n                last_active: user.last_active,\n                profile: profile,\n                location: {\n                    id: loc.id || `${loc.user_id}_loc`,\n                    user_id: loc.user_id,\n                    latitude: loc.latitude,\n                    longitude: loc.longitude,\n                    updated_at: loc.updated_at\n                },\n                distance: Math.round(distance)\n            };\n        }).filter((item)=>item !== null);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            data: nearby\n        });\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        data: locations || []\n    });\n}\nfunction getDistanceFromLatLonInMeters(lat1, lon1, lat2, lon2) {\n    // Haversine formula implementation\n    const R = 6371e3; // Earth's radius in meters\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2gtbmVhcmJ5L3JvdXRlLnRzPzlhYWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgY29uc3QgbGF0ID0gcGFyc2VGbG9hdChzZWFyY2hQYXJhbXMuZ2V0KCdsYXQnKSEpO1xuICBjb25zdCBsbmcgPSBwYXJzZUZsb2F0KHNlYXJjaFBhcmFtcy5nZXQoJ2xuZycpISk7XG4gIGNvbnN0IHJhZGl1cyA9IHBhcnNlRmxvYXQoc2VhcmNoUGFyYW1zLmdldCgncmFkaXVzJykhKSB8fCAxMDAwO1xuICBjb25zdCB1c2VySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKTsgLy8gRXhjbHVkZSBjdXJyZW50IHVzZXIgZnJvbSByZXN1bHRzXG5cbiAgaWYgKCFsYXQgfHwgIWxuZykge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSBhcmUgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gIH1cblxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhXG4gICk7XG5cbiAgLy8gQ2FsY3VsYXRlIGJvdW5kaW5nIGJveCB0byByZWR1Y2UgcXVlcnkgc2l6ZVxuICAvLyBBcHByb3hpbWF0ZTogMSBkZWdyZWUgbGF0aXR1ZGUg4omIIDExMWttLCAxIGRlZ3JlZSBsb25naXR1ZGUg4omIIDExMWttICogY29zKGxhdGl0dWRlKVxuICBjb25zdCBsYXRPZmZzZXQgPSByYWRpdXMgLyAxMTEwMDA7IC8vIENvbnZlcnQgbWV0ZXJzIHRvIGRlZ3JlZXNcbiAgY29uc3QgbG5nT2Zmc2V0ID0gcmFkaXVzIC8gKDExMTAwMCAqIE1hdGguY29zKGxhdCAqIE1hdGguUEkgLyAxODApKTtcblxuICAvLyBUcnkgUG9zdEdJUyBmaXJzdCAoaWYgYXZhaWxhYmxlKSwgb3RoZXJ3aXNlIHVzZSBib3VuZGluZyBib3ggKyBIYXZlcnNpbmVcbiAgbGV0IGxvY2F0aW9ucztcbiAgXG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgUG9zdEdJUyBpcyBhdmFpbGFibGUgYnkgdHJ5aW5nIGEgUG9zdEdJUyBxdWVyeVxuICAgIC8vIElmIFBvc3RHSVMgZXh0ZW5zaW9uIGlzIGVuYWJsZWQsIHVzZSBTVF9EV2l0aGluIGZvciBlZmZpY2llbnQgZGlzdGFuY2UgZmlsdGVyaW5nXG4gICAgY29uc3QgeyBkYXRhOiBwb3N0Z2lzRGF0YSwgZXJyb3I6IHBvc3RnaXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdnZXRfbmVhcmJ5X2xvY2F0aW9ucycsIHtcbiAgICAgIGNlbnRlcl9sYXQ6IGxhdCxcbiAgICAgIGNlbnRlcl9sbmc6IGxuZyxcbiAgICAgIHJhZGl1c19tZXRlcnM6IHJhZGl1c1xuICAgIH0pO1xuXG4gICAgaWYgKCFwb3N0Z2lzRXJyb3IgJiYgcG9zdGdpc0RhdGEpIHtcbiAgICAgIGxvY2F0aW9ucyA9IHBvc3RnaXNEYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjayB0byBib3VuZGluZyBib3ggKyBIYXZlcnNpbmVcbiAgICAgIGNvbnN0IHsgZGF0YTogYmJveERhdGEsIGVycm9yOiBiYm94RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICB1c2VyX2lkLCBcbiAgICAgICAgICBsYXRpdHVkZSwgXG4gICAgICAgICAgbG9uZ2l0dWRlLCBcbiAgICAgICAgICB1cGRhdGVkX2F0LFxuICAgICAgICAgIHVzZXJzIWlubmVyKGlkLCBuYW1lLCBlbWFpbCwgYXZhdGFyX3VybCwgbGFzdF9hY3RpdmUpLFxuICAgICAgICAgIHByb2ZpbGVzIWlubmVyKGlkLCB1c2VyX2lkLCBwcm9maWxlX3R5cGUsIG5hbWUsIGhlYWRsaW5lLCBiaW8sIHZpc2liaWxpdHksIGV4cGVyaWVuY2UsIGVkdWNhdGlvbiwgc2tpbGxzLCBob2JiaWVzLCBwcm9tcHRzLCBsaW5rZWRpbl91cmwsIGdpdGh1Yl91cmwsIGluc3RhZ3JhbV9oYW5kbGUsIG9wZW5fdG9fd29yaywgcmVsYXRpb25zaGlwX2dvYWwpXG4gICAgICAgIGApXG4gICAgICAgIC5ndGUoJ2xhdGl0dWRlJywgbGF0IC0gbGF0T2Zmc2V0KVxuICAgICAgICAubHRlKCdsYXRpdHVkZScsIGxhdCArIGxhdE9mZnNldClcbiAgICAgICAgLmd0ZSgnbG9uZ2l0dWRlJywgbG5nIC0gbG5nT2Zmc2V0KVxuICAgICAgICAubHRlKCdsb25naXR1ZGUnLCBsbmcgKyBsbmdPZmZzZXQpXG4gICAgICAgIC5uZXEoJ3VzZXJfaWQnLCB1c2VySWQgfHwgJycpOyAvLyBFeGNsdWRlIGN1cnJlbnQgdXNlclxuXG4gICAgICBpZiAoYmJveEVycm9yKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBiYm94RXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBGaWx0ZXIgYnkgdmlzaWJpbGl0eSBhbmQgY2FsY3VsYXRlIGV4YWN0IGRpc3RhbmNlIHVzaW5nIEhhdmVyc2luZVxuICAgICAgY29uc3QgbmVhcmJ5ID0gKGJib3hEYXRhIHx8IFtdKS5maWx0ZXIoKGxvYzogYW55KSA9PiB7XG4gICAgICAgIC8vIE9ubHkgaW5jbHVkZSBwcm9maWxlcyB3aXRoICdwdWJsaWMnIG9yICduZWFyYnknIHZpc2liaWxpdHlcbiAgICAgICAgaWYgKGxvYy5wcm9maWxlcyAmJiBsb2MucHJvZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHByb2ZpbGUgPSBsb2MucHJvZmlsZXNbMF07XG4gICAgICAgICAgaWYgKHByb2ZpbGUudmlzaWJpbGl0eSA9PT0gJ3ByaXZhdGUnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGF0ZSBleGFjdCBkaXN0YW5jZVxuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGdldERpc3RhbmNlRnJvbUxhdExvbkluTWV0ZXJzKGxhdCwgbG5nLCBsb2MubGF0aXR1ZGUsIGxvYy5sb25naXR1ZGUpO1xuICAgICAgICByZXR1cm4gZGlzdGFuY2UgPD0gcmFkaXVzO1xuICAgICAgfSkubWFwKChsb2M6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGdldERpc3RhbmNlRnJvbUxhdExvbkluTWV0ZXJzKGxhdCwgbG5nLCBsb2MubGF0aXR1ZGUsIGxvYy5sb25naXR1ZGUpO1xuICAgICAgICBjb25zdCBwcm9maWxlID0gbG9jLnByb2ZpbGVzICYmIGxvYy5wcm9maWxlcy5sZW5ndGggPiAwID8gbG9jLnByb2ZpbGVzWzBdIDogbnVsbDtcbiAgICAgICAgY29uc3QgdXNlciA9IGxvYy51c2VycyB8fCBudWxsO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF1c2VyIHx8ICFwcm9maWxlKSByZXR1cm4gbnVsbDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICBhdmF0YXJfdXJsOiB1c2VyLmF2YXRhcl91cmwsXG4gICAgICAgICAgbGFzdF9hY3RpdmU6IHVzZXIubGFzdF9hY3RpdmUsXG4gICAgICAgICAgcHJvZmlsZTogcHJvZmlsZSxcbiAgICAgICAgICBsb2NhdGlvbjoge1xuICAgICAgICAgICAgaWQ6IGxvYy5pZCB8fCBgJHtsb2MudXNlcl9pZH1fbG9jYCxcbiAgICAgICAgICAgIHVzZXJfaWQ6IGxvYy51c2VyX2lkLFxuICAgICAgICAgICAgbGF0aXR1ZGU6IGxvYy5sYXRpdHVkZSxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogbG9jLmxvbmdpdHVkZSxcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IGxvYy51cGRhdGVkX2F0XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXN0YW5jZTogTWF0aC5yb3VuZChkaXN0YW5jZSlcbiAgICAgICAgfTtcbiAgICAgIH0pLmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtICE9PSBudWxsKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZGF0YTogbmVhcmJ5IH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIC8vIElmIFBvc3RHSVMgUlBDIGRvZXNuJ3QgZXhpc3QsIGZhbGwgYmFjayB0byBib3VuZGluZyBib3ggbWV0aG9kXG4gICAgY29uc3QgeyBkYXRhOiBiYm94RGF0YSwgZXJyb3I6IGJib3hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxuICAgICAgLnNlbGVjdChgXG4gICAgICAgIHVzZXJfaWQsIFxuICAgICAgICBsYXRpdHVkZSwgXG4gICAgICAgIGxvbmdpdHVkZSwgXG4gICAgICAgIHVwZGF0ZWRfYXQsXG4gICAgICAgIHVzZXJzIWlubmVyKGlkLCBuYW1lLCBlbWFpbCwgYXZhdGFyX3VybCwgbGFzdF9hY3RpdmUpLFxuICAgICAgICBwcm9maWxlcyFpbm5lcihpZCwgdXNlcl9pZCwgcHJvZmlsZV90eXBlLCBuYW1lLCBoZWFkbGluZSwgYmlvLCB2aXNpYmlsaXR5LCBleHBlcmllbmNlLCBlZHVjYXRpb24sIHNraWxscywgaG9iYmllcywgcHJvbXB0cywgbGlua2VkaW5fdXJsLCBnaXRodWJfdXJsLCBpbnN0YWdyYW1faGFuZGxlLCBvcGVuX3RvX3dvcmssIHJlbGF0aW9uc2hpcF9nb2FsKVxuICAgICAgYClcbiAgICAgIC5ndGUoJ2xhdGl0dWRlJywgbGF0IC0gbGF0T2Zmc2V0KVxuICAgICAgLmx0ZSgnbGF0aXR1ZGUnLCBsYXQgKyBsYXRPZmZzZXQpXG4gICAgICAuZ3RlKCdsb25naXR1ZGUnLCBsbmcgLSBsbmdPZmZzZXQpXG4gICAgICAubHRlKCdsb25naXR1ZGUnLCBsbmcgKyBsbmdPZmZzZXQpXG4gICAgICAubmVxKCd1c2VyX2lkJywgdXNlcklkIHx8ICcnKTtcblxuICAgIGlmIChiYm94RXJyb3IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBiYm94RXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cblxuICAgIC8vIEZpbHRlciBieSB2aXNpYmlsaXR5IGFuZCBjYWxjdWxhdGUgZXhhY3QgZGlzdGFuY2UgdXNpbmcgSGF2ZXJzaW5lXG4gICAgY29uc3QgbmVhcmJ5ID0gKGJib3hEYXRhIHx8IFtdKS5maWx0ZXIoKGxvYzogYW55KSA9PiB7XG4gICAgICBpZiAobG9jLnByb2ZpbGVzICYmIGxvYy5wcm9maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHByb2ZpbGUgPSBsb2MucHJvZmlsZXNbMF07XG4gICAgICAgIGlmIChwcm9maWxlLnZpc2liaWxpdHkgPT09ICdwcml2YXRlJykgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgZGlzdGFuY2UgPSBnZXREaXN0YW5jZUZyb21MYXRMb25Jbk1ldGVycyhsYXQsIGxuZywgbG9jLmxhdGl0dWRlLCBsb2MubG9uZ2l0dWRlKTtcbiAgICAgIHJldHVybiBkaXN0YW5jZSA8PSByYWRpdXM7XG4gICAgfSkubWFwKChsb2M6IGFueSkgPT4ge1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSBnZXREaXN0YW5jZUZyb21MYXRMb25Jbk1ldGVycyhsYXQsIGxuZywgbG9jLmxhdGl0dWRlLCBsb2MubG9uZ2l0dWRlKTtcbiAgICAgIGNvbnN0IHByb2ZpbGUgPSBsb2MucHJvZmlsZXMgJiYgbG9jLnByb2ZpbGVzLmxlbmd0aCA+IDAgPyBsb2MucHJvZmlsZXNbMF0gOiBudWxsO1xuICAgICAgY29uc3QgdXNlciA9IGxvYy51c2VycyB8fCBudWxsO1xuICAgICAgXG4gICAgICBpZiAoIXVzZXIgfHwgIXByb2ZpbGUpIHJldHVybiBudWxsO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgYXZhdGFyX3VybDogdXNlci5hdmF0YXJfdXJsLFxuICAgICAgICBsYXN0X2FjdGl2ZTogdXNlci5sYXN0X2FjdGl2ZSxcbiAgICAgICAgcHJvZmlsZTogcHJvZmlsZSxcbiAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICBpZDogbG9jLmlkIHx8IGAke2xvYy51c2VyX2lkfV9sb2NgLFxuICAgICAgICAgIHVzZXJfaWQ6IGxvYy51c2VyX2lkLFxuICAgICAgICAgIGxhdGl0dWRlOiBsb2MubGF0aXR1ZGUsXG4gICAgICAgICAgbG9uZ2l0dWRlOiBsb2MubG9uZ2l0dWRlLFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IGxvYy51cGRhdGVkX2F0XG4gICAgICAgIH0sXG4gICAgICAgIGRpc3RhbmNlOiBNYXRoLnJvdW5kKGRpc3RhbmNlKVxuICAgICAgfTtcbiAgICB9KS5maWx0ZXIoKGl0ZW06IGFueSkgPT4gaXRlbSAhPT0gbnVsbCk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBkYXRhOiBuZWFyYnkgfSk7XG4gIH1cblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBkYXRhOiBsb2NhdGlvbnMgfHwgW10gfSk7XG59XG5cbmZ1bmN0aW9uIGdldERpc3RhbmNlRnJvbUxhdExvbkluTWV0ZXJzKGxhdDE6IG51bWJlciwgbG9uMTogbnVtYmVyLCBsYXQyOiBudW1iZXIsIGxvbjI6IG51bWJlcikge1xuICAvLyBIYXZlcnNpbmUgZm9ybXVsYSBpbXBsZW1lbnRhdGlvblxuICBjb25zdCBSID0gNjM3MWUzOyAvLyBFYXJ0aCdzIHJhZGl1cyBpbiBtZXRlcnNcbiAgY29uc3QgZExhdCA9IChsYXQyIC0gbGF0MSkgKiBNYXRoLlBJIC8gMTgwO1xuICBjb25zdCBkTG9uID0gKGxvbjIgLSBsb24xKSAqIE1hdGguUEkgLyAxODA7XG4gIGNvbnN0IGEgPSBNYXRoLnNpbihkTGF0LzIpICogTWF0aC5zaW4oZExhdC8yKSArXG4gICAgICAgICAgICBNYXRoLmNvcyhsYXQxICogTWF0aC5QSSAvIDE4MCkgKiBNYXRoLmNvcyhsYXQyICogTWF0aC5QSSAvIDE4MCkgKiBcbiAgICAgICAgICAgIE1hdGguc2luKGRMb24vMikgKiBNYXRoLnNpbihkTG9uLzIpO1xuICBjb25zdCBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMS1hKSk7XG4gIHJldHVybiBSICogYztcbn0iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiTmV4dFJlc3BvbnNlIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImxhdCIsInBhcnNlRmxvYXQiLCJnZXQiLCJsbmciLCJyYWRpdXMiLCJ1c2VySWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwibGF0T2Zmc2V0IiwibG5nT2Zmc2V0IiwiTWF0aCIsImNvcyIsIlBJIiwibG9jYXRpb25zIiwiZGF0YSIsInBvc3RnaXNEYXRhIiwicG9zdGdpc0Vycm9yIiwicnBjIiwiY2VudGVyX2xhdCIsImNlbnRlcl9sbmciLCJyYWRpdXNfbWV0ZXJzIiwiYmJveERhdGEiLCJiYm94RXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZ3RlIiwibHRlIiwibmVxIiwibWVzc2FnZSIsIm5lYXJieSIsImZpbHRlciIsImxvYyIsInByb2ZpbGVzIiwibGVuZ3RoIiwicHJvZmlsZSIsInZpc2liaWxpdHkiLCJkaXN0YW5jZSIsImdldERpc3RhbmNlRnJvbUxhdExvbkluTWV0ZXJzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJtYXAiLCJ1c2VyIiwidXNlcnMiLCJpZCIsImVtYWlsIiwibmFtZSIsImF2YXRhcl91cmwiLCJsYXN0X2FjdGl2ZSIsImxvY2F0aW9uIiwidXNlcl9pZCIsInVwZGF0ZWRfYXQiLCJyb3VuZCIsIml0ZW0iLCJsYXQxIiwibG9uMSIsImxhdDIiLCJsb24yIiwiUiIsImRMYXQiLCJkTG9uIiwiYSIsInNpbiIsImMiLCJhdGFuMiIsInNxcnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/fetch-nearby/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tslib"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ffetch-nearby%2Froute&page=%2Fapi%2Ffetch-nearby%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffetch-nearby%2Froute.ts&appDir=%2FUsers%2Fabhishek%2FProjects%2FLinkMe-1%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fabhishek%2FProjects%2FLinkMe-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();